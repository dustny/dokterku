<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Dokterku</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN" crossorigin="anonymous">
  </head>
  <style>
    /* Centering container */
    .center-container {
        display: flex;
        justify-content: center;
        align-items: center;
        height: 10vh; /* Center vertically in viewport */
    }

    /* Styles for the form */
    .search-form {
        text-align: center;
    }
</style>
  <body>
    <%- include('navbar/navbar') %>
    
    <h1 style="font-family: serif;font-size: 280%; text-align: center;">Medical Records</h1>
    <center><a href="/medicalRecords/add" class="list-group-item list-group-item-action" role="button" style="color: rgb(12, 56, 215);font-size: large;font-family: 'Times New Roman';font-size: 150%"  <% if (patient[0].role==='patient' ) { %>style="display: none;"<% } %>>Click here to Add New Medical Record</a></center>
    <div class="center-container">
        <form class="search-form d-flex" role="search">
            <input class="form-control me-2" type="search" placeholder="Search by Patient Id" aria-label="Search" style="width: 300px;" name="PatientId">
            <button class="btn btn-outline-success" type="submit">Search</button>
        </form>
    </div>
    <table class="table">
        <thead>
          <tr class="table-dark" >
            <th scope="col">No</th>
            <th scope="col">Patient Id</th>
            <th scope="col">Disease</th>
            <th scope="col">Level Of Danger</th>
            <th scope="col" style="text-align: center;">Action</th>
          </tr>
        </thead>
        <tbody>
            <% patient.forEach((el,index) => { %>
                <% el.Diseases.forEach(element => { %>
                <tr>
                    <th><%= ++index  %></th>
                    <td><%= el.id %></td>
                    <td><%= element.name %></td>
                    <td><%= element.level %></td>
                    <td>
                      <center><a href="/medicalRecords/<%= el.id %>/detail/<%= element.id %>" class="btn btn-outline-warning" role="button">Detail</a></center>
                    </td>
                    </tr>
                <% }) %>
            <% }) %>
        </tbody>
      </table>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-C6RzsynM9kWDrMNeT87bh95OGNyZPhcTNXj1NW7RuBCsyN/o0jlpcV8Qyq46cDfL" crossorigin="anonymous"></script>
  </body>
</html>